targets::tar_load(agree_model)
View(agree_model)
targets::tar_load(data)
data_wide <- data |>
mutate(method = case_when(
method == "fdimp" ~ "M1",
method == "ai" ~ "M2"
)) |>
pivot_wider(id_cols = c(subject_code,session,trial),
names_from = "method",
values_from = "jump_height") |>
mutate(
mean = (M2 + M1)/2,
diff = M2 - M1
)
library(tidyverse)
data_wide <- data |>
mutate(method = case_when(
method == "fdimp" ~ "M1",
method == "ai" ~ "M2"
)) |>
pivot_wider(id_cols = c(subject_code,session,trial),
names_from = "method",
values_from = "jump_height") |>
mutate(
mean = (M2 + M1)/2,
diff = M2 - M1
)
plot <- data_wide |>
ggplot(aes(x = mean, y = diff)) +
# Add reference line at zero
geom_hline(yintercept = 0, linetype = "dashed") +
# Add raw data
geom_point(alpha = 0.75) +
# Add mean bias
annotate("rect", alpha = 0.25,
xmin = -Inf, xmax = Inf,
ymin = agree_model$lower_ci_mean,
ymax = agree_model$upper_ci_mean) +
geom_hline(yintercept = agree_model$mean_bias,
size = 1) +
geom_text(label = glue::glue("Bias = {round(agree_model$mean_bias,2)} cm"),
x = max(data_wide$mean) + 0.75,
y = agree_model$upper_ci_mean + 1,
size = 3,
# parse = TRUE
) +
geom_text(label = glue::glue("[95%CI: {round(agree_model$lower_ci_mean,2)}, {round(agree_model$upper_ci_mean,2)}]"),
x = max(data_wide$mean) + 0.75,
y = agree_model$upper_ci_mean + 0.5,
size = 3,
# parse = TRUE
) +
# Add lower LoA
annotate("rect", alpha = 0.25,
xmin = -Inf, xmax = Inf,
ymin = agree_model$lower_ci_l_loa[[1]],
ymax = agree_model$upper_ci_l_loa[[1]]) +
geom_hline(yintercept = agree_model$l_loa,
size = 1, linetype = "dotted")  +
geom_text(label = glue::glue("Lower LoA = {round(agree_model$l_loa,2)} cm"),
x = max(data_wide$mean) + 0.75,
y = agree_model$lower_ci_l_loa - 1,
size = 3,
# parse = TRUE
) +
geom_text(label = glue::glue("[95%CI: {round(agree_model$lower_ci_l_loa,2)}, {round(agree_model$upper_ci_l_loa,2)}]"),
x = max(data_wide$mean) + 0.75,
y = agree_model$lower_ci_l_loa - 1.5,
size = 3,
# parse = TRUE
) +
# Add upper LoA
annotate("rect", alpha = 0.25,
xmin = -Inf, xmax = Inf,
ymin = agree_model$lower_ci_u_loa,
ymax = agree_model$upper_ci_u_loa) +
geom_hline(yintercept = agree_model$u_loa,
size = 1, linetype = "dotted") +
geom_text(label = glue::glue("Upper LoA = {round(agree_model$u_loa,2)} cm"),
x = max(data_wide$mean) + 0.75,
y = agree_model$upper_ci_u_loa + 1,
size = 3,
# parse = TRUE
) +
geom_text(label = glue::glue("[95%CI: {round(agree_model$lower_ci_u_loa,2)}, {round(agree_model$upper_ci_u_loa,2)}]"),
x = max(data_wide$mean) + 0.75,
y = agree_model$upper_ci_u_loa + 0.5,
size = 3,
# parse = TRUE
) +
scale_x_continuous(limits = c(min(data_wide$mean), max(data_wide$mean) + 5)) +
scale_y_continuous(limits = c(min(data_wide$diff)-1, max(data_wide$diff) + 1)) +
labs(
x = "Mean of Measurements (cm)",
y = "Difference of Measurements (cm)",
title = "Agreement Between Methods",
subtitle = "Mixed Effects Model Mean Bias and 95% Limits of Agreement",
caption = "Interval estimates for mean bias and limits of agreement are 95% quantiles from nonparametric bootstrap resampling participants 10000 times"
) +
theme_bw()
plot
data_wide <- data |>
mutate(method = case_when(
method == "fdimp" ~ "M1",
method == "ai" ~ "M2"
)) |>
pivot_wider(id_cols = c(subject_code,session,trial),
names_from = "method",
values_from = "jump_height") |>
mutate(
mean = (M2 + M1)/2,
diff = M2 - M1
)
plot <- data_wide |>
ggplot(aes(x = mean, y = diff)) +
# Add reference line at zero
geom_hline(yintercept = 0, linetype = "dashed") +
# Add raw data
geom_point(alpha = 0.75) +
# Add mean bias
annotate("rect", alpha = 0.25,
xmin = -Inf, xmax = Inf,
ymin = agree_model$lower_ci_mean,
ymax = agree_model$upper_ci_mean) +
geom_hline(yintercept = agree_model$mean_bias,
size = 1) +
geom_text(label = glue::glue("Bias = {round(agree_model$mean_bias,2)} cm"),
x = max(data_wide$mean) + 0.75,
y = agree_model$upper_ci_mean + 1,
size = 3,
# parse = TRUE
)
plot
max(data_wide$mean) + 0.75
View(data_wide)
targets::tar_make()
targets::tar_make()
targets::tar_make()
targets::tar_make()
targets::tar_make()
targets::tar_make()
targets::tar_make()
targets::tar_make()
install.packages("grateful")
renv::status()
renv::snapshot()
renv::status()
targets::tar_load(agree_model)
View(agree_model)
round(agree_model$mean_bias)
agree_model
7.38-0.61
7-0.25
targets::tar_visnetwork()
install.packages("quarto")
renv::snapshot()
renv::status()
targets::tar_visnetwork()
targets::tar_make()
targets::tar_make()
grateful::get_citations()
grateful::cite_packages()
cite_packages(out.dir = ".")
grateful::cite_packages(out.dir = ".")
targets::tar_make()
targets::tar_make()
targets::tar_visnetwork()
targets::tar_visnetwork()
renv::status()
renv::snapshot()
targets::tar_make()
targets::tar_make()
targets::tar_load(agree_model)
targets::tar_load(agree_model)
targets::tar_load(reli_models)
targets::tar_load(_targets/agree_model)
targets::tar_load("_targets/agree_model")
targets::tar_config_set(store = here::here('_targets'))
install.packages("here")
targets::tar_config_set(store = here::here('_targets'))
targets::tar_load(agree_model)
targets::tar_load(reli_models)
targets::tar_load(agree_plot)
targets::tar_make()
targets::tar_make()
targets::tar_make()
renv::snapshot()
renv::status()
targets::tar_visnetwork()
targets::tar_make()
